(this["webpackJsonpzomato-frontend"]=this["webpackJsonpzomato-frontend"]||[]).push([[0],[,,,,,,,function(e){e.exports=JSON.parse('{"API_URL":"https://developers.zomato.com/api/v2.1/","API_KEY":"3eb58604156a83e4cd688c6778e7d259"}')},,,function(e,t,a){e.exports=a(24)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e){e.exports=JSON.parse('{"light":{"primary-bg":"#ffffff","primary-fg":"#000000","border":"#121212","primary-color":"#7289da","primary-caption":"red","nav-bg":"#dcd8d5","side-bg":"#f8f9fa","nav-color":"#000","alert-color":"red","secondary-caption":"#333","card-border":"1px solid #ffffff","card-hover-border":"1px solid #000"},"dark":{"primary-bg":"#2e2e2e","primary-fg":"#ffffff","border":"#121212","primary-color":"#7289da","primary-caption":"orange","nav-bg":"#23272a","side-bg":"#343a40","nav-color":"#fff","secondary-caption":"#eee","alert-color":"orange","card-border":"1px solid #2e2e2e","card-hover-border":"1px solid #fff"}}')},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),s=(a(15),a(1)),i=a(2),l=a.n(i),u=a(3),m=(a(17),r.a.createContext({})),f=m.Provider,d=m,p=a(7),v=p.API_URL,b=p.API_KEY;var h=function(e){var t,a=e.onSelect,c=e.currTheme,o=e.setTheme,i=Object(n.useContext)(d),m=Object(n.useState)([]),f=Object(s.a)(m,2),p=f[0],h=f[1],g=Object(n.useState)("Trivandrum"),E=Object(s.a)(g,2),y=E[0],j=E[1],O=Object(n.useState)(!1),N=Object(s.a)(O,2),_=N[0],k=N[1],w=Object(n.useState)(!1),x=Object(s.a)(w,2),S=x[0],C=x[1],I=function(){return C(!S)},T=function(){var e=Object(u.a)(l.a.mark((function e(){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h([]),console.log("Load start for "+t),a="cities?q=".concat(t),e.next=5,fetch(v+a,{headers:{"Content-Type":"application/json","user-key":b}});case 5:if(n=e.sent,k(!1),200===n.status){e.next=10;break}return console.error("Could not connect to Zomato API"),e.abrupt("return");case 10:return e.next=12,n.json();case 12:r=e.sent,console.log("Load end for "+y),console.log(r),h(r.location_suggestions);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e;(e=p.find((function(e){return e.name===y})))&&(a(e),clearTimeout(window.timer),h([]))}),[p]),r.a.createElement("div",{className:"nav-container",style:{backgroundColor:i["nav-bg"]}},r.a.createElement("h1",{className:"logo",style:{color:i["nav-color"]}},"find",r.a.createElement("span",{style:{color:i["primary-color"]}},"food")),r.a.createElement("div",{className:"search-wrapper",style:{border:"2px solid ".concat(i["nav-color"])}},r.a.createElement("i",{className:"fa ".concat(_?"fa-circle-notch fa-spin":"fa-search"),onMouseOver:function(){},style:{color:i["nav-color"]}}),r.a.createElement("input",{className:"search",placeholder:"Search for cities",value:y,onChange:function(e){clearTimeout(window.timer),p.find((function(e){return e.name===y}))||(k(!0),j(e.target.value),t=e.target.value,window.timer=setTimeout(T,300))},id:"city-input",list:"city-list",autoComplete:"off",style:{color:i["nav-color"]}})),p&&r.a.createElement("datalist",{id:"city-list"},p.map((function(e){return r.a.createElement("option",{value:e.name,key:e.id})}))),r.a.createElement("div",{className:"theme-icon",style:{color:i["nav-color"]}},r.a.createElement("i",{onMouseOver:I,onMouseLeave:I,className:"fa ".concat(S&&"fa-spin"," ").concat("light"==c?"fa-moon":"fa-sun"),onClick:function(){var e="light";"light"==c&&(e="dark"),o(e)}})))},g=a(5);a(18),a(19);var E=function(e){var t=Object(n.useContext)(d);return r.a.createElement("span",{className:"caption-text "+e.className,style:{color:e.color||t["secondary-caption"]}},e.children)},y=(a(20),["#c0392b","#e67e22","#f1c40f","#2ecc71"]);var j=function(e){var t=Object(n.useContext)(d),a=Object(n.useState)(!1),c=Object(s.a)(a,2),o=c[0],i=c[1],l=e.hotel.restaurant.thumb||e.hotel.restaurant.featured_image||"https://via.placeholder.com/300",u=y[4-e.hotel.restaurant.price_range]||"gray";return r.a.createElement("div",{className:"item-wrapper",onMouseOver:function(){return i(!0)},onMouseLeave:function(){return i(!1)},style:{border:o?t["card-hover-border"]:t["card-border"]},onClick:e.onClick},r.a.createElement("div",{className:"list-item"},r.a.createElement("div",{className:"img",style:{backgroundImage:"url(' "+l+"')",backgroundSize:"cover"}}),r.a.createElement("h2",null,e.hotel.restaurant.name),r.a.createElement("div",{className:"center"},r.a.createElement(E,{color:t["primary-caption"]},e.hotel.restaurant.cuisines)),r.a.createElement("div",{className:"center"},e.hotel.restaurant.user_rating&&r.a.createElement("span",{className:"stars",style:{color:"#"+e.hotel.restaurant.user_rating.rating_color}},r.a.createElement("i",{className:"fa fa-star"}),e.hotel.restaurant.user_rating.aggregate_rating),r.a.createElement("span",{className:"price-range",style:{color:u}},r.a.createElement("i",{className:"fa"},e.hotel.restaurant.currency),e.hotel.restaurant.price_range,"x"))))},O=["name","price","rating"],N={has_table_booking:"Table Booking",has_online_delivery:"Online Delivery",is_delivering_now:"Delivering Now",is_table_reservation_supported:"Reservation"};var _=function(e){var t=e.initialHotels,a=e.results_found,c=e.setRestaurant,o=Object(n.useState)([]),i=Object(s.a)(o,2),l=i[0],u=i[1],m=Object(n.useState)(null),f=Object(s.a)(m,2),d=f[0],p=f[1],v=Object(n.useState)(!1),b=Object(s.a)(v,2),h=b[0],y=b[1],_=Object(n.useState)([]),k=Object(s.a)(_,2),w=k[0],x=k[1],S=function(e){y(!1);var t=e||Object(g.a)(l);switch(O[d]){case"name":t.sort((function(e,t){return e.restaurant.name>t.restaurant.name?1:-1}));break;case"price":t.sort((function(e,t){return e.restaurant.price_range-t.restaurant.price_range}));break;case"rating":t.sort((function(e,t){return e.restaurant.user_rating.aggregate_rating-t.restaurant.user_rating.aggregate_rating}))}u(t)},C=function(){var e=Object(g.a)(t);w.forEach((function(t){e=e.filter((function(e){return e.restaurant[t]}))})),S(e)};return Object(n.useEffect)((function(){C()}),[t]),Object(n.useEffect)((function(){return S()}),[d]),Object(n.useEffect)((function(){return C()}),[w]),r.a.createElement("div",{className:"list-body"},r.a.createElement("div",{className:"list-control"},r.a.createElement(E,{className:"left"},l.length," Results Shown (",a," Found)"),r.a.createElement(E,{className:"right"},"Filter:\xa0",Object.keys(N).map((function(e){return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement("button",{onClick:function(){return function(e){var t=Object(g.a)(w);if(w.includes(e))return t=t.filter((function(t){return t!==e})),void x(t);t.push(e),x(t)}(e)}},N[e],w.includes(e)&&r.a.createElement("i",{className:"fa fa-times"})),"\xa0/\xa0")}))),r.a.createElement(E,{className:"center"},"Sort by:\xa0",O.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("button",{onClick:function(){return function(e){if(d===e)return u(Object(g.a)(l).reverse()),void y(!h);p(e)}(t)},style:{textTransform:"capitalize"}},e,d===t&&r.a.createElement("i",{className:"fa fa-arrow-".concat(h?"down":"up")})),"\xa0/\xa0")})))),r.a.createElement("div",{className:"items-wrapper"},l.map((function(e,t){return r.a.createElement(j,{hotel:e,key:t,onClick:function(){return c(e)}})}))))},k=(a(21),a(7)),w=k.API_URL,x=k.API_KEY;var S=function(e){var t=e.city,a=e.setRestaurant,c=Object(n.useState)([]),o=Object(s.a)(c,2),i=o[0],m=o[1],f=Object(n.useState)(0),d=Object(s.a)(f,2),p=d[0],v=d[1],b=Object(n.useState)(0),h=Object(s.a)(b,2),g=h[0],E=h[1],y=Object(n.useState)(!1),j=Object(s.a)(y,2),O=j[0],N=j[1],k=function(){var e=Object(u.a)(l.a.mark((function e(a){var n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="search?entity_type=city&entity_id=".concat(t.id,"&start=").concat(g),e.next=3,fetch(w+n,{headers:{"Content-Type":"application/json","user-key":x}});case 3:if(200===(r=e.sent).status){e.next=7;break}return console.error("Could not connect to Zomato API"),e.abrupt("return");case 7:return e.next=9,r.json();case 9:if(c=e.sent,v(c.results_found),a){e.next=14;break}return m(i.concat(c.restaurants)),e.abrupt("return");case 14:m(c.restaurants);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){N(!0),m([]),k(!0).then((function(){return N(!1)}))}),[t]),Object(n.useEffect)((function(){N(!0),k().then((function(){return N(!1)}))}),[g]),r.a.createElement("div",{className:"main-body"},r.a.createElement(_,{initialHotels:i,results_found:p,setRestaurant:a}),r.a.createElement("button",{className:"load",onClick:function(){return E(g+20)}},O?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-circle-notch fa-spin"})," Loading"):r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fa fa-arrow-down"})," Load More")))},C=(a(22),a(7)),I=C.API_URL,T=C.API_KEY;var A=function(e){var t,a,c,o,i,m,f,p,v,b,h,g=e.restaurant,y=e.setRestaurant,j=Object(n.useContext)(d),O=Object(n.useState)(!1),N=Object(s.a)(O,2),_=N[0],k=N[1],w=Object(n.useState)(!0),x=Object(s.a)(w,2),S=x[0],C=x[1],A=Object(n.useState)([]),P=Object(s.a)(A,2),R=P[0],L=P[1],M=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="dailymenu?res_id=".concat(null===(t=g)||void 0===t?void 0:t.id),e.next=3,fetch(I+a,{headers:{"Content-Type":"application/json","user-key":T}});case 3:if(n=e.sent,C(!1),200===n.status){e.next=8;break}return console.error("Could not connect to Zomato API"),e.abrupt("return");case 8:return e.next=10,n.json();case 10:r=e.sent;try{L(r.daily_menus[0].daily_menu.dishes)}catch(c){console.log("No menus provided")}case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){g&&(k(!0),C(!0),L([]),M())}),[g]),g=null===(t=g)||void 0===t?void 0:t.restaurant,console.log(g);var F={"fa-dollar":"".concat(null===(a=g)||void 0===a?void 0:a.currency," ").concat(null===(c=g)||void 0===c?void 0:c.average_cost_for_two," (for two)"),"fa-clock":null===(o=g)||void 0===o?void 0:o.timings,"fa-map-marker":null===(i=g)||void 0===i?void 0:i.location.address,"fa-map":null===(m=g)||void 0===m?void 0:m.location.locality,"fa-phone-alt":null===(f=g)||void 0===f?void 0:f.phone_numbers};return r.a.createElement("div",{className:"sideBar",style:{right:"".concat(_?"0px":"-600px"),backgroundColor:j["side-bg"]}},r.a.createElement("h1",null,r.a.createElement("i",{className:"fa fa-times",onClick:function(){y({}),k(!1)}}),null===(p=g)||void 0===p?void 0:p.name),r.a.createElement("div",{className:"img",style:{backgroundImage:"url('".concat((null===(v=g)||void 0===v?void 0:v.featured_image)||(null===(b=g)||void 0===b?void 0:b.thumb)||"https://via.placeholder.com/350","')"),backgroundSize:"cover",width:"350px",height:"350px"}}),r.a.createElement(E,{className:"caption"},null===(h=g)||void 0===h?void 0:h.cuisines),r.a.createElement("h3",null,"Info"),r.a.createElement("div",{className:"info"},Object.keys(F).map((function(e){return r.a.createElement("span",{className:"info-row"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fa ".concat(e)})),r.a.createElement("span",{className:"value"},F[e]))}))),r.a.createElement("h3",null,"Menu"),r.a.createElement("div",{className:"dishes"},S?r.a.createElement("div",{className:"loading",style:{color:"green"}},r.a.createElement("i",{className:"fa fa-circle-notch fa-spin"})," Fetching Menu"):R.length?R.map((function(e){return r.a.createElement("div",{className:"dish-row"},r.a.createElement("span",{className:"dish-name"},e.dish.name),r.a.createElement("span",{className:"dish-price"},e.dish.price))})):r.a.createElement("p",{className:"alert",style:{color:j["alert-color"]}},"The restaurant hasn't provided an online menu")))},P=a(23);var R=function(){var e=Object(n.useState)({name:"Trivandrum",id:11290}),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)("light"),i=Object(s.a)(o,2),l=i[0],u=i[1],m=Object(n.useState)({}),d=Object(s.a)(m,2),p=d[0],v=d[1],b=Object(n.useState)({}),g=Object(s.a)(b,2),E=g[0],y=g[1];return Object(n.useEffect)((function(){v(P[l])}),[l]),r.a.createElement("div",{className:"App",style:{background:p["primary-bg"],color:p["primary-fg"]}},r.a.createElement(f,{value:p},r.a.createElement(h,{onSelect:c,currTheme:l,setTheme:u}),r.a.createElement(S,{city:a,setRestaurant:y}),r.a.createElement(A,{restaurant:E,setRestaurant:y})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.5cf0666c.chunk.js.map